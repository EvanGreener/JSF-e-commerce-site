<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:bookstore="http://java.sun.com/jsf/composite/default_components">
    <h:head>
        <ui:repeat value="#{bb.book}" var="book">
            <title>#{book.title}</title>
        </ui:repeat>
        <link rel="stylesheet" href="https://unpkg.com/swiper/css/swiper.min.css"/>


        <link href="https://fonts.googleapis.com/css?family=Montserrat|Roboto&amp;display=swap" rel="stylesheet"/>

        <h:outputStylesheet library="webjars" name="Semantic-UI/2.4.1/semantic.min.css" />
        <h:outputStylesheet library="css" name="homepage.css" />
        <h:outputStylesheet library="book_css" name="bookpage.css" />
        <h:outputScript library="js" name="book.js" />
        <h:outputScript library="js" name="homepage.js" />
        <h:outputStylesheet library="webjars" name="font-awesome/4.7.0/css/font-awesome.min-jsf.css" />
        <!-- Swiper JS -->
        <script src="https://unpkg.com/swiper/js/swiper.min.js"></script>
    </h:head>

    <h:body>


        <!--composite component that comes from the navbar.xhtml file to avoid coding nav bar in all web pages-->
        <bookstore:navbar/>

        <!--Book description section-->
        <div class="lightGreyDiv">
            <div class="ui stackable cards">
                <div class="ui fluid card">
                    <div class="content">
                        <ui:repeat value="#{bb.book}" var="book">
                            <h1>#{book.title}</h1>
                            <section class="bookInfo">
                                <div class="bookTextInfo">
                                    <p>- <ui:repeat value="#{book.authorsCollection}" var="author">
                                            #{author.name}
                                        </ui:repeat>
                                    </p><br></br>
                                    <h:commandButton class="bookFormatBtn button" value="PDF" type="button" />
                                    <h:commandButton  class="bookFormatBtn button" value="EPUB" type="button" />
                                    <br></br><br></br>
                                    <a>### Avg Rating 435 Reviews</a>
                                    <br></br>
                                    #{book.description}
                                    ing with guitar and hanging with guitar and hanging with guitar <span id="dots">...</span><span id="more">and hanging with guitar and hanging with guitar and hanging with guitar and hanging with guitar and hanging with guitar and hanging with guitar and hanging with guitar and hanging with guitar and hanging with guitar and hanging with guitar and hanging with guitar and hanging with guitar and hanging with guitar and hanging with guitar and hanging with guitar and hanging with guitar and hanging with guitar and hanging with guitar and hanging with guitar and hanging with guitar and hanging with guitar and hanging with guitar and hanging with guitar and hanging with guitar and hanging with guitar and hanging with guitar and hanging with guitar and hanging with guitar and hanging with guitar and hanging with guitar and hanging with guitar and hanging with guitar and hanging with guitar and hanging with guitar and hanging with guitar and hanging with guitar and hanging with guitar and hanging with guitar and hanging with guitar and hanging with guitar and hanging with guitar and hanging with guitar and hanging with guitar and hanging with guitar and hanging with guitar and hanging with guitar and hanging with guitar and hanging with guitar and hanging with guitar and hanging with guitar and hanging with guitar and hanging with guitar and hanging with guitar and hanging with guitar and hanging with guitar and hanging with guitar and hanging with guitar and hanging with guitar and hanging with guitar and hanging with guitar and hanging with guitar and hanging with guitar and hanging with guitar and hanging with guitar and hanging with guitar and hanging with guitar and hanging with guitar and hanging with guitar and hanging with guitar and hanging with guitar and hanging with guitar and hanging with guitar and hanging with guitar and hanging with guitar and hanging with </span>
                                    <a  onclick="showMore()" id="moreBtn">Read more</a>

                                </div>
                                <div class="bookCover">
                                    <h:graphicImage class="image" height="350px" width="300px" library="images" name="#{book.isbn}.jpg"  />
                                    <br/>
                                    <h1>$#{book.listPrice}</h1>   

                                </div>

                            </section>   
                        </ui:repeat>

                        <input type="number" value="1" id="quantity" name="quantity" min="1" max="5"></input>
                        <h:commandButton  class="addToCartBtn button" value="Add to cart" type="button" />

                    </div>
                </div>
            </div>
        </div>

        <!--Reviews section-->

        <div class="lightPurpleDiv">




            <table class="ui padded table">
                <tr><td  colspan="5" class="right aligned single line">    
                        <h:commandButton onclick="addReview()" id="reviewBtn" class="button addReviewBtn" value="+" type="button" />
                    </td>

                </tr>
                <tbody>


                    <ui:repeat value="#{bb.book.reviews}" var="book">
                        <tr>
                            <td>


                                <div class="ui items">
                                    <div class="item">
                                        <div class="content">
                                            <a class="header">#{book.reviewTitle}</a>
                                            <div class="meta">
                                                <span>#{book.clientID}</span>
                                            </div>
                                            <div class="description">
                                                <p>#{book.reviewBody} </p>
                                            </div>
                                            <div class="extra">


                                                <div align="right" class="ui">
                                                    #{book.dateEntered}
                                                </div>


                                            </div>
                                        </div>
                                    </div>
                                </div> 

                            </td>
                        </tr>
                    </ui:repeat>
                    <tr>
                        <td class="single line">





                            <div class="ui items">
                                <div class="item">
                                    <div class="content">
                                        <a class="header">Of Mice and Men</a>
                                        <div class="meta">
                                            <span>Firstname Lastname</span>
                                        </div>
                                        <div class="description">
                                            <p> nkjdsfkjd fkdjhgkjhsdgkjfhd fkd hgksjfhdgkjfsdhgkjfdhg d gfdjskhg fdsgjhsdf fdghdkjgsd </p>
                                        </div>
                                        <div class="extra">


                                            <div align="right" class="ui">
                                                Jan 1st 2019
                                            </div>


                                        </div>
                                    </div>
                                </div>
                            </div>











                        </td>
                    </tr>
                    <tr>
                        <td>
                            <div class="ui items">
                                <div class="item">
                                    <div class="content">
                                        <a class="header">Of Mice and Men</a>
                                        <div class="meta">
                                            <span>Firstname Lastname</span>
                                        </div>
                                        <div class="description">
                                            <p> nkjdsfkjd fkdjhgkjhsdgkjfhd fkd hgksjfhdgkjfsdhgkjfdhg d gfdjskhg fdsgjhsdf fdghdkjgsd </p>
                                        </div>
                                        <div class="extra">


                                            <div align="right" class="ui">
                                                Jan 1st 2019
                                            </div>


                                        </div>
                                    </div>
                                </div>
                            </div>
                        </td>
                        <td class="single line">
                            <div class="ui items">
                                <div class="item">
                                    <div class="content">
                                        <a class="header">Of Mice and Men</a>
                                        <div class="meta">
                                            <span>Firstname Lastname</span>
                                        </div>
                                        <div class="description">
                                            <p> nkjdsfkjd fkdjhgkjhsdgkjfhd fkd hgksjfhdgkjfsdhgkjfdhg d gfdjskhg fdsgjhsdf fdghdkjgsd </p>
                                        </div>
                                        <div class="extra">


                                            <div align="right" class="ui">
                                                Jan 1st 2019
                                            </div>


                                        </div>
                                    </div>
                                </div>
                            </div>
                        </td>
                    </tr>
                </tbody>


                <tfoot>
                    <tr><th colspan="5">
                            <div class="ui right floated pagination menu">
                                <a class="icon item">
                                    <i class="left chevron icon"></i>
                                </a>
                                <a class="item">1</a>
                                <a class="item">2</a>
                                <a class="item">3</a>
                                <a class="item">4</a>
                                <a class="icon item">
                                    <i class="right chevron icon"></i>
                                </a>
                            </div>
                        </th>
                    </tr></tfoot>
            </table>                     


        </div>


        <!-- The Modal -->
        <div id="myModal" class="modal">

            <!-- Modal content -->
            <div class="modal-content">
                <span class="close">x</span>
                <h4>Create Review</h4>
                <br></br>
                <h5>Of Mice and Men</h5>
                <hr></hr>
                <p>Add a Title</p>
                <input type="text"></input>
                <p>Overall Rating</p>
                <input type="text"></input>
                <p>/5</p>
                <p>Add a Review</p>
                <textarea id="w3mission" rows="4" cols="50">
                </textarea>
                <br></br>
                <input type="submit"></input>
            </div>

        </div>


        <!--Suggestions section-->
        <div class="lightOrangeDiv">


            <br></br>
            <h4>Similar Genre</h4><br></br>

            <div class="ui four doubling stackable cards">
                <ui:repeat value="#{bb.getSimilarGenreBooks(bb.book)}" var="bo">


                    <div class="ui fluid card darker">
                        <div class="homepageImg">
                            <h:graphicImage class="img" height="250" width="156.25" library="images" name="#{bo.isbn}.jpg"  />
                        </div>
                        <div class="content">
                              <h:commandLink action = "#{bb.viewBook(bo)}" type="submit" value = "">
                                        <div class="header">

                                            #{bo.title}</div>
                                        <div class="meta">

                                            <ui:repeat value="#{bo.authorsCollection}" var="author">
                                                #{author.name}
                                            </ui:repeat>

                                        </div>

                                        <div class="description">
                                            <div class="ui tag labels">
                                                <a class="ui label">
                                                    $#{bo.listPrice}
                                                </a>
                                            </div>

                                        </div>
                                    </h:commandLink>
                        </div>
                        <div class="ui bottom attached button">
                            + Add to Cart
                        </div>

                    </div>

                </ui:repeat>
            </div> 
        </div>
        <div class='lightGreyDivLessSpacing'>
          <div class="ui top attached tabular menu" id="tabs">
              <a class="active item" data-tab="view">Book Information</a>
              <a class="item" data-tab="review">Leaving a Review</a>
          </div>
          <div class="ui bottom attached active tab segment" data-tab="view">
              To view information about a book, simply click on the title and it will redirect you
              to another page containing a higher-resolution image of the book cover and a brief
              explanation of the book's plot. When adding a book to your cart, you have the option
              of either adding a PDF or e-pub format of the book by clicking on either of the two
              buttons located above the title and the average rating. You have the option of adding
              any number of books, so long as we have the specified quantity of said books in stock.
              You can also view other books of the same genre of the current book you are viewing,
              which will be displayed below the review pane (see "Leaving a Review" for more information
              on how to submit a book review).
          </div>
          <div class="ui bottom attached tab segment" data-tab="review">
              You can also leave a review by clicking on the + button on the upper right-hand
              corner of the review pane, where you can view approved reviews left by other users.
              When leaving a review, you must specify a title, a numerical rating out of 5,
              and an explanation for your review. Upon submission, it will be subject to approval,
              and after it is approved, it will be publicly displayed alongside the other review.
          </div>
        </div>
        <!--composite component that comes from the footer.xhtml file to avoid coding the website footer in all web pages-->
        <bookstore:footer/>




        <!-- Initialize Swiper -->
        <script>
            var swiper = new Swiper('.swiper-container', {
                loop: true,
                centeredSlides: true,
                autoplay: {
                    delay: 5000,
                    disableOnInteraction: false,
                },
                pagination: {
                    el: '.swiper-pagination',
                },
                navigation: {
                    nextEl: '.swiper-button-next',
                    prevEl: '.swiper-button-prev',
                },
            });
        </script>
    </h:body>
</html>
