<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:b="http://bootsfaces.net/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core"

      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:bookstore="http://java.sun.com/jsf/composite/default_components"
      xmlns:p="http://primefaces.org/ui"
      xmlns:a="http://xmlns.jcp.org/jsf/passthrough">
    <h:head>

        <title>The BookStore</title>
        <link rel="stylesheet" href="https://unpkg.com/swiper/css/swiper.min.css"/>

        <link href="https://fonts.googleapis.com/css?family=Montserrat|Roboto&amp;display=swap" rel="stylesheet"/>

        <h:outputStylesheet library="webjars" name="Semantic-UI/2.4.1/semantic.min.css" />
        <h:outputStylesheet library="css" name="homepage.css" />

        <h:outputScript library="js" name="homepage.js" />

        <script  src="https://www.gstatic.com/charts/loader.js"></script>
        <script src="https://unpkg.com/swiper/js/swiper.min.js"></script>
    </h:head>

    <h:body>

        <!--<b:alert severity="info">{clientBacking.message}</b:alert>-->


        <!--composite component that comes from the navbar.xhtml file to avoid coding nav bar in all web pages-->
        <bookstore:navbar/>

        <div class="swiper-container">
            <div class="swiper-wrapper">

                <ui:repeat value="#{bb.recentlyAdded}" var="book">

                    <div class="swiper-slide item#{bb.bookSlideColor}">


                        <div class="sliderTextContent">

                            <h1>#{book.title}</h1>
                            <span>    <ui:repeat value="#{book.authorsCollection}" var="author">
                                    #{author.name}
                                </ui:repeat></span>
                            <p> #{book.description}</p>
                            <h:form>
                                <h:commandButton type="submit"
                                                 value="Shop Now"
                                                 action="#{bb.viewBook(book)}" />

                            </h:form>
                        </div>


                        <div  class="sliderImageContent">
                            <h:graphicImage width="300px" height="400px" library="images" name="#{book.isbn}.jpg"  />
                        </div>
                    </div>
                </ui:repeat>


            </div>
            <!-- Add Pagination -->
            <div class="swiper-pagination"></div>
            <!-- Add Arrows -->
            <div class="swiper-button-next"></div>
            <div class="swiper-button-prev"></div>
        </div>
        <div class="lightOrangeDiv">

            <p class="small">Best Seller Products</p><br/>
            <h:form>
                <h:panelGroup>
                    <div class="ui four doubling stackable cards">


                        <ui:repeat value="#{bb.bestSeller}" var="books">

                            <div class="ui fluid card darker homepageCard">
                                <div class="homepageImg">
                                    <h:graphicImage class="img" height="250" width="200" library="images" name="#{books.isbn}.jpg"/>
                                    <div class="cardHoverBtn"> View Cover</div>
                                </div>

                                <div class="content">

                                    <h:commandLink action = "#{bb.viewBook(books)}" type="submit" value = "">
                                        <div class="header textColor">

                                            #{books.title}</div>
                                        <div class="meta">

                                            <ui:repeat value="#{books.authorsCollection}" var="author">
                                                #{author.name}
                                            </ui:repeat>

                                        </div>

                                        <div class="description">
                                            <div class="ui tag labels">
                                                <a class="ui label">
                                                    $#{books.listPrice}
                                                </a>
                                            </div>

                                        </div>
                                    </h:commandLink>

                                </div>



                                <div class="ui two bottom attached buttons ">
                                    <div onclick="addToCart(#{books.isbn}, 'pdf')" class="ui button">+ Add to Cart</div>



                                </div>
                            </div>
                        </ui:repeat>
                    </div>
                </h:panelGroup>
            </h:form>

            <br/><br/>
            <h:form>
                <div class=" searchBarDiv">
                    <h:inputText a:placeholder="Search books..." value="#{search.query}" style=" float: center; margin-top: -30px;" class="searchBar"/>
                    <h:commandButton class="searchButton" action="#{search.showSearch()}" type="submit" value = "Search"/>
                </div>
            </h:form>
            <!-- The Modal -->
            <div id="myModal" class="modal">

                <!-- The Close Button -->
                <span class="close">x</span>

                <!-- Modal Content (The Image) -->
                <h:graphicImage height="100%" width="50%" class="modal-content" id="img01" library="images" name="colorScheme.PNG"  />

                <!-- Modal Caption (Image Text) -->
                <div id="caption"></div>
            </div>

        </div>


        <!-- Survey/Ad/News Section -->

        <div   class="lightGreyDiv">






            <table class="ui table lightGreyDiv" >

                <tbody>
                    <tr align="center">
                        <td align="center">
                            <div style="background-color:#d77a61;" class="ui half page test ad left" data-text="">
                                <h3 style="color:white;padding-top: 10px;" >News</h3>
                                <p:scrollPanel style="overflow-y: auto;height: 100%;">
                                    <p:feedReader size="10" value="https://www.theverge.com/rss/index.xml" var="feed">
                                        <h:outputText value="#{feed.title}" style="font-weight: bold"/>
                                        <h:outputText value="#{feed.description.value}" escape="false"/>
                                        <p:separator />
                                        <f:facet name="error">
                                            Something went wrong.
                                        </f:facet>
                                    </p:feedReader>  
                                </p:scrollPanel>

                            </div></td>
                        <td align="center"> <div id="surveyDiv" class="ui netboard test ad survey" data-text="" >


                                <h:form >
                                    <ui:repeat value="#{ss.survey}" var="s">

                                        <h1 style="text-align:center">  #{s.surveyName}</h1>



                                        <div id="results" class="invisible">
                                            <hr/>
                                            <p:chart id="barchart" type="bar"  model="#{ss.cartChart}"  style="width:530px"/>
                                            <div class="ui horizontal statistics">
                                                <h:panelGroup id="other" >
                                                <ui:repeat  value="#{s.surveyData}" var="sd">


                                                    <div class="ui statistic">
                                                        <div class="value">#{sd.votes}</div>
                                                        <div class="label">#{sd.choice}</div>
                                                    </div>
                                                    <br/>


                                                </ui:repeat>
                                                    </h:panelGroup>
                                            </div>
                                            <hr/>
                                            <h2>Thank you for answering!</h2>
                                        </div>


                                        <div id="survey">
                                            <p style="font-size:20px;padding:2%">#{s.surveyDescription}</p>
                                           
                                                <h:selectOneRadio style="font-size:20px" required="true" layout="pageDirection" value="#{surveyDataBacking.surveyDataChoice}" >
                                                    <f:selectItems value="#{s.surveyData}" var="sd" itemValue="#{sd.dataID}" itemLabel = " #{sd.choice}" />
                                                </h:selectOneRadio>

                                           
                                            <p:commandButton  update="other barchart"  class="bookFormatBtn"  value="Submit" oncomplete="showResults()">
                  
                                            </p:commandButton>
                                            
                                        </div>
                                    </ui:repeat>
                                    
                                </h:form>


                            </div></td>
                        <td align="center"><div class="ui wide skyscraper test ad right homepageCard" data-text="">
                                <h:graphicImage height="100%" width="100%" library="images" name="apples.png"  onclick="viewAd('https://en.wikipedia.org/wiki/Apple')"/>
                            </div></td>
                    </tr>
                </tbody>
            </table>

        </div>


        <div class="lightPurpleDiv">
            <p class="small">Popular Genres</p><br/>

            <h:form>


                <h:panelGroup>
                    <div class="ui four doubling stackable cards">
                        <ui:repeat value="#{bb.popularGenres}" var="genres">
                            <div class="ui fluid card darker">
                                <h:commandLink action = "#{search.showGenreBooks(genres)}" type="submit" value = "">
                                    <div class="homepageImg">
                                        <h:graphicImage class="img" height="200" width="320" library="images" name="#{genres}.jpg"/>
                                    </div>
                                    <div class="content">
                                        <div class="header"><h3 class="genre">#{genres}</h3></div>
                                    </div>
                                </h:commandLink>
                            </div>

                        </ui:repeat>
                    </div>
                </h:panelGroup>


            </h:form>
            <br/><br/>
            <div class="ui centered leaderboard test ad" data-text="">

                <h:graphicImage height="100%" width="100%" library="images" name="blueberry.png" onclick="viewAd('https://en.wikipedia.org/wiki/Blueberry')" />
            </div>
        </div>



        <!--composite component that comes from the footer.xhtml file to avoid coding the website footer in all web pages-->
        <bookstore:footer/>

        <!-- Initialize Swiper -->
        <script>
            var swiper = new Swiper('.swiper-container', {
                loop: true,
                centeredSlides: true,
                autoplay: {
                    delay: 5000,
                    disableOnInteraction: false,
                },
                pagination: {
                    el: '.swiper-pagination',
                },
                navigation: {
                    nextEl: '.swiper-button-next',
                    prevEl: '.swiper-button-prev',
                },
            });
        </script>
    </h:body>
</html>
